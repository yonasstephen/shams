# Shams Web Application Configuration
# Copy this file to .env and fill in your values

# ============================================
# Yahoo OAuth (Required)
# ============================================
# Get these from https://developer.yahoo.com/apps/
# 1. Go to https://developer.yahoo.com/apps/
# 2. Create a new app with "Read" permissions for Fantasy Sports
# 3. Set the Redirect URI to: http://localhost:5173/auth/callback (or your frontend URL + /auth/callback)
YAHOO_CONSUMER_KEY=your_consumer_key_here
YAHOO_CONSUMER_SECRET=your_consumer_secret_here

# ============================================
# Web App Settings (Required)
# ============================================
# Secret key for session encryption (generate a random string for production)
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
SESSION_SECRET=change-this-to-a-random-secret-in-production

# Backend API URL (where the FastAPI server runs)
# CRITICAL: Must use HTTPS (Yahoo OAuth requires secure redirect URLs)
# CRITICAL FOR MOBILE WEB: Must be publicly accessible, not localhost
# Development: https://localhost:8000 (self-signed cert, see ./certs/)
# Production: https://your-domain.com (or https://api.your-domain.com)
# IMPORTANT: Mobile devices need real domain names or IP addresses to connect
BACKEND_URL=https://localhost:8000

# Frontend URL (for OAuth callbacks and CORS)
# CRITICAL: Must match the URL users access the app from
# CRITICAL: Must use HTTPS (Yahoo OAuth requirement)
# Development: https://localhost:5173 (Vite with self-signed cert)
# Production: https://your-domain.com
FRONTEND_URL=https://localhost:5173

# Debug mode (set to False in production)
DEBUG=True

# ============================================
# Security Settings
# ============================================
# Cookie security - HTTPS is always required (Yahoo OAuth requirement)
# Set to 'true' for production with valid SSL certificates
# Set to 'false' for development with self-signed certificates
# When true: cookies only sent over HTTPS, SameSite=Strict
# When false: cookies sent over HTTPS but allows self-signed certs, SameSite=Lax
COOKIE_SECURE=false

# Email whitelist - comma-separated list of Yahoo emails allowed to access the app
# Leave empty for development (allows any Yahoo account)
# REQUIRED for production to restrict access
# Example: ALLOWED_YAHOO_EMAILS=user1@yahoo.com,user2@yahoo.com
ALLOWED_YAHOO_EMAILS=

# ============================================
# Optional: Cache and Performance Settings
# ============================================
# Directory for Yahoo OAuth tokens
SHAMS_YAHOO_TOKEN_DIR=~/.shams/yahoo

# Timeout for NBA API requests (seconds)
NBA_API_TIMEOUT=60

# ============================================
# Optional: Stat Color Thresholds
# ============================================
# Customize these based on your league's scoring system
# These control when stats display as green (good), yellow (okay), or red (bad)
# Adjust based on your league's punts and priorities

# Points (PTS) - per game
# STAT_PTS_YELLOW_MIN=5.0
# STAT_PTS_GREEN_MIN=13.0

# Rebounds (REB) - per game
# STAT_REB_YELLOW_MIN=5.0
# STAT_REB_GREEN_MIN=9.0

# Assists (AST) - per game
# STAT_AST_YELLOW_MIN=3.0
# STAT_AST_GREEN_MIN=6.0

# Three-Pointers Made (3PM) - per game
# STAT_3PM_YELLOW_MIN=2.0
# STAT_3PM_GREEN_MIN=4.0

# Steals (STL) - per game
# STAT_STL_YELLOW_MIN=2.0
# STAT_STL_GREEN_MIN=3.0

# Blocks (BLK) - per game
# STAT_BLK_YELLOW_MIN=2.0
# STAT_BLK_GREEN_MIN=3.0

# Turnovers (TO) - per game (INVERSE: lower is better)
# STAT_TO_GREEN_MAX=2.0
# STAT_TO_YELLOW_MAX=4.0

# Field Goal Percentage (FG%) - as decimal (e.g., 0.50 = 50%)
# STAT_FG_PCT_RED_MAX=0.30
# STAT_FG_PCT_YELLOW_MAX=0.50

# Free Throw Percentage (FT%) - as decimal (e.g., 0.80 = 80%)
# STAT_FT_PCT_RED_MAX=0.60
# STAT_FT_PCT_YELLOW_MAX=0.80

# Usage Percentage (USG%) - as decimal (e.g., 0.25 = 25%)
# STAT_USG_PCT_YELLOW_MIN=0.15
# STAT_USG_PCT_GREEN_MIN=0.25

# Minutes (MIN) - per game
# STAT_MIN_YELLOW_MIN=10.0
# STAT_MIN_GREEN_MIN=18.0

# ============================================
# Production Deployment Checklist
# ============================================
# CRITICAL: Before deploying to production, ensure:
#
# ✅ 1. Set DEBUG=False
# ✅ 2. Generate a strong SESSION_SECRET: python -c "import secrets; print(secrets.token_hex(32))"
#
# ✅ 3. Set BACKEND_URL to publicly accessible URL (NOT localhost)
#        Examples:
#        - https://yourdomain.com (if using reverse proxy)
#        - https://api.yourdomain.com (if using subdomain)
#        - http://YOUR_SERVER_IP:8000 (testing only, not recommended)
#        MUST be accessible from mobile devices!
#
# ✅ 4. Set FRONTEND_URL to publicly accessible URL (NOT localhost)
#        Example: https://yourdomain.com
#        Must match the URL users type in their browser
#
# ✅ 5. Update Yahoo OAuth redirect URI in Yahoo Developer Console to:
#        {BACKEND_URL}/api/auth/callback
#
# ✅ 6. Rebuild Docker images after changing .env:
#        docker-compose -f docker-compose.prod.yml build --no-cache
#        docker-compose -f docker-compose.prod.yml up -d
#
# ✅ 7. Test on mobile device to verify "Network Error" is resolved
#
# For detailed deployment instructions and examples, see:
# - QUICKSTART.md - Setup guide for CLI, web app, and production/NAS deployment